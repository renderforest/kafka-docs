asyncapi: '3.0.0'
info:
  title: Renderforest Centralized Kafka Documentation
  version: '1.0.0'
  description: Renderforest centralized documentation for Kafka topics. 
  tags:
    - name: github repo
      externalDocs:
        url: https://github.com

servers:
 development:
   host: kk.local.renderforest.com:9092
   description: Kafka broker for the local and development environments.
   protocol: kafka
   protocolVersion: 1.0.0
   tags:
     - name: env:development
       description: This environment is meant for developers to run their own tests.
 production:
   host: localhost:5672
   description: Kafka broker for the production and stage environments.
   protocol: kafka
   protocolVersion: 1.0.0
   tags:
     - name: env:production
       description: This environment is the live environment available for final users.
channels:
  graphic-project-create:
    address: USER-GRAPHIC-CREATE
    description: Channel for user graphic project creation events
    messages:
     GraphicProjectCreated:
        contentType: application/json
        payload:
          $ref: '#/components/schemas/GraphicProjectEvent'
  graphic-project-export:
    address: USER-GRAPHIC-EXPORT
    description: Channel for user graphic project exporting events
    messages:
     GraphicProjectExported:
        contentType: application/json
        payload:
          $ref: '#/components/schemas/GraphicProjectEvent'
  logo-project-create:
    address: USER-LOGO-CREATE
    description: Channel for user logo project creation events
    messages:
     LogoProjectCreated:
        contentType: application/json
        payload:
          $ref: '#/components/schemas/LogoProjectEvent'
  logo-project-export:
    address: USER-LOGO-EXPORT
    description: Channel for user logo project exporting events
    messages:
     LogoProjectExported:
        contentType: application/json
        payload:
          $ref: '#/components/schemas/LogoProjectEvent'
  mockup-project-create:
    address: USER-MOCKUP-CREATE
    description: Channel for user mockup project creating events
    messages:
     MockupProjectCreated:
        contentType: application/json
        payload:
          $ref: '#/components/schemas/MockupProjectEvent'
  mockup-project-export:
    address: USER-MOCKUP-EXPORT
    description: Channel for user mockup project exporting events
    messages:
     MockupProjectExported:
        contentType: application/json
        payload:
          $ref: '#/components/schemas/MockupProjectEvent'
  user-search:
    address: USER-SEARCH
    description: Channel for user search events
    messages:
     UserSearch:
        contentType: application/json
        payload:
          $ref: '#/components/schemas/UserSearchEvent'
  video-project-create:
    address: USER-VIDEO-CREATE
    description: Channel for user video project creation events
    messages:
     VideoProjectCreated:
        contentType: application/json
        payload:
          $ref: '#/components/schemas/VideoProjectEvent'
  video-project-export:
    address: USER-VIDEO-EXPORT
    description: Channel for user video project exporting events
    messages:
     VideoProjectExported:
        contentType: application/json
        payload:
          $ref: '#/components/schemas/VideoProjectEvent'
  website-project-create:
    address: USER-WEBSITE-CREATE
    description: Channel for user website project creation events
    messages:
      WebsiteProjectCreated:
        contentType: application/json
        payload:
          $ref: '#/components/schemas/WebsiteProjectEvent'
  website-project-export:
    address: USER-WEBSITE-EXPORT
    description: Channel for user Website project exporting events
    messages:
      WebsiteProjectExported:
        contentType: application/json
        payload:
          $ref: '#/components/schemas/WebsiteProjectEvent'

operations:
     publishGraphicCreate:
       action: send
       summary: ProjectEvent send when user create the graphic project
       channel:
         $ref: '#/channels/graphic-project-create'
       messages:
         - $ref: '#/channels/graphic-project-create/messages/GraphicProjectCreated'
       tags:
         - name: renderforest-api
       x-used-in-service:
         - service-name: renderforest-api 
          
     receiveGraphicCreate:
       action: receive
       summary: ProjectEvent received when user create the project
       channel:
         $ref: '#/channels/graphic-project-create'
       messages:
         - $ref: '#/channels/graphic-project-create/messages/GraphicProjectCreated'
       tags:
         - name: user-suggestions
       x-used-in-service:
         - service-name: user-suggestions  
     publishGraphicExport:
       action: send
       summary: ProjectEvent send when user export the graphic project
       channel:
         $ref: '#/channels/graphic-project-export'
       messages:
         - $ref: '#/channels/graphic-project-export/messages/GraphicProjectExported'
       tags:
         - name: renderforest-api
       x-used-in-service:
         - service-name: renderforest-api 
          
     receiveGraphicExport:
       action: receive
       summary: ProjectEvent received when user export the project
       channel:
         $ref: '#/channels/graphic-project-export'
       messages:
         - $ref: '#/channels/graphic-project-export/messages/GraphicProjectExported'
       tags:
         - name: user-suggestions
       x-used-in-service:
         - service-name: user-suggestions  
     publishLogoCreate:
       action: send
       summary: ProjectEvent send when user Export the Logo project
       channel:
         $ref: '#/channels/logo-project-create'
       messages:
         - $ref: '#/channels/logo-project-create/messages/LogoProjectCreated'
       tags:
         - name: renderforest-api
       x-used-in-service:
         - service-name: renderforest-api 
          
     receiveLogoCreate:
       action: receive
       summary: ProjectEvent received when user create the project
       channel:
         $ref: '#/channels/logo-project-create'
       messages:
         - $ref: '#/channels/logo-project-create/messages/LogoProjectCreated'
       tags:
         - name: user-suggestions
       x-used-in-service:
         - service-name: user-suggestions  
     publishLogoExport:
       action: send
       summary: ProjectEvent send when user export the Logo project
       channel:
         $ref: '#/channels/logo-project-export'
       messages:
         - $ref: '#/channels/logo-project-export/messages/LogoProjectExported'
       tags:
         - name: renderforest-api
       x-used-in-service:
         - service-name: renderforest-api 
          
     receiveLogoExport:
       action: receive
       summary: ProjectEvent received when user export the Logo project
       channel:
         $ref: '#/channels/logo-project-export'
       messages:
         - $ref: '#/channels/logo-project-export/messages/LogoProjectExported'
       tags:
         - name: user-suggestions
       x-used-in-service:
         - service-name: user-suggestions  
     publishMockupCreate:
       action: send
       summary: ProjectEvent send when user create the mockup project
       channel:
         $ref: '#/channels/mockup-project-create'
       messages:
         - $ref: '#/channels/mockup-project-create/messages/MockupProjectCreated'
       tags:
         - name: renderforest-api
       x-used-in-service:
         - service-name: renderforest-api 
          
     receiveMockupCreate:
       action: receive
       summary: ProjectEvent received when user create the mockup project
       channel:
         $ref: '#/channels/mockup-project-create'
       messages:
         - $ref: '#/channels/mockup-project-create/messages/MockupProjectCreated'
       tags:
         - name: user-suggestions
       x-used-in-service:
         - service-name: user-suggestions  
     publishMockupExport:
       action: send
       summary: ProjectEvent send when user export the mockup project
       channel:
         $ref: '#/channels/mockup-project-export'
       messages:
         - $ref: '#/channels/mockup-project-export/messages/MockupProjectExported'
       tags:
         - name: renderforest-api
       x-used-in-service:
         - service-name: renderforest-api 
          
     receiveMockupExport:
       action: receive
       summary: ProjectEvent received when user export the project
       channel:
         $ref: '#/channels/mockup-project-export'
       messages:
         - $ref: '#/channels/mockup-project-export/messages/MockupProjectExported'
       tags:
         - name: user-suggestions
       x-used-in-service:
         - service-name: user-suggestions  
     publishUserSearch:
       action: send
       summary: Event send when user do search inside the application
       channel:
         $ref: '#/channels/user-search'
       messages:
         - $ref: >-
             #/channels/user-search/messages/UserSearch
       # x-used-in-service:
       #   - service-name: renderforest-api
       #   - service-name: site-maker-api
       tags:
         - name: renderforest-api
         - name: site-maker-api
         - name: logo-maker-api
         - name: graphic-maker-api
     
     receiveUserSearch:
       action: receive
       summary: Event received when user do search inside the application
       channel:
         $ref: '#/channels/user-search'
       messages:
         - $ref: >-
             #/channels/user-search/messages/UserSearch
       # x-used-in-service:
       #   - service-name: renderforest-api
       #   - service-name: site-maker-api
       tags:
         - name: renderforest-api
         - name: site-maker-api
         - name: logo-maker-api
         - name: graphic-maker-api
     publishVideoCreate:
       action: send
       summary: ProjectEvent send when user create the video project
       channel:
         $ref: '#/channels/video-project-create'
       messages:
         - $ref: '#/channels/video-project-create/messages/VideoProjectCreated'
       tags:
         - name: renderforest-api
       x-used-in-service:
         - service-name: renderforest-api 
          
     receiveVideoCreate:
       action: receive
       summary: ProjectEvent received when user create the project
       channel:
         $ref: '#/channels/video-project-create'
       messages:
         - $ref: '#/channels/video-project-create/messages/VideoProjectCreated'
       tags:
         - name: user-suggestions
       x-used-in-service:
         - service-name: user-suggestions  
     publishVideoExport:
       action: send
       summary: ProjectEvent send when user export the video project
       channel:
         $ref: '#/channels/video-project-export'
       messages:
         - $ref: '#/channels/video-project-export/messages/VideoProjectExported'
       tags:
         - name: renderforest-api
       x-used-in-service:
         - service-name: renderforest-api  
     receiveVideoExport:
       action: receive
       summary: ProjectEvent received when user export the project
       channel:
         $ref: '#/channels/video-project-export'
       messages:
         - $ref: '#/channels/video-project-export/messages/VideoProjectExported'
       tags:
         - name: user-suggestions
       x-used-in-service:
         - service-name: user-suggestions  
     publishWebsiteCreate:
       action: send
       summary: ProjectEvent send when user create the webiste
       channel:
         $ref: '#/channels/website-project-create'
       messages:
         - $ref: '#/channels/website-project-create/messages/WebsiteProjectCreated'
       tags:
         - name: renderforest-api
       x-used-in-service: 
         - service-name: renderforest-api 
          
     receiveWebsiteCreate:
       action: receive
       summary: ProjectEvent received when user create the website
       channel:
         $ref: '#/channels/website-project-create'
       messages:
         - $ref: '#/channels/website-project-create/messages/WebsiteProjectCreated'
       tags:
         - name: user-suggestions
       x-used-in-service:
         - service-name: user-suggestions  
     publishWebsiteExport:
       action: send
       summary: ProjectEvent send when user export the webiste
       channel:
         $ref: '#/channels/website-project-export'
       messages:
         - $ref: '#/channels/website-project-export/messages/WebsiteProjectExported'
       tags:
         - name: renderforest-api
       x-used-in-service: 
         - service-name: renderforest-api 
          
     receiveWebsiteExport:
       action: receive
       summary: ProjectEvent received when user export the website
       channel:
         $ref: '#/channels/website-project-export'
       messages:
         - $ref: '#/channels/website-project-export/messages/WebsiteProjectExported'
       tags:
         - name: user-suggestions
       x-used-in-service:
         - service-name: user-suggestions  

components:
  schemas:
    GraphicProjectEvent:
      type: object
      properties:
        userId:
          type: integer
        subUserId:
          type: integer
        templateId:
          type: integer
        projectId:
          type: integer
        meta: 
          type: object
          properties:
            screenTags:
              type: array
              items:
                type: string
            templateTags:
              type: array
              items:
                type: string
            templateMetaName:
              type: string
    LogoProjectEvent:
      type: object
      properties:
        userId:
          type: integer
        subUserId:
          type: integer
        templateId:
          type: integer
        projectId:
          type: integer
        meta: 
          type: object
          properties:
            categoriesData:
              type: array
              items:
                type: string
            tags:
              type: array
              items:
                type: string
            secondaryTags:
              type: array
              items:
                type: string
    MockupProjectEvent:
      type: object
      properties:
        userId:
          type: integer
        subUserId:
          type: integer
        templateId:
          type: integer
        projectId:
          type: integer
        meta: 
          type: object
          properties:
            mockupTags:
              type: array
              items:
                type: string
            packTags:
              type: array
              items:
                type: string
            mockupTitle:
              type: string
            packTitle:
              type: string
            packDescription:
              type: string
    UserSearchEvent:
      type: object
      properties:
        product:
          type: string
        userId:
          type: integer
        subUserId:
          type: integer
        text:
          type: string
    VideoProjectEvent:
      type: object
      properties:
        userId:
          type: integer
        subUserId:
          type: integer
        templateId:
          type: integer
        projectId:
          type: integer
        meta: 
          type: object
          properties:
            tags:
              type: array
              items:
                type: string
            description:
              type: string
            keywords:
              type: string
    WebsiteProjectEvent:
      type: object
      properties:
        userId:
          type: integer
        subUserId:
          type: integer
        templateId:
          type: integer
        projectId:
          type: integer
        meta:
          type: object
          properties:
            tags:
              type: string
            description:
              type: string
            keywords:
              type: string

